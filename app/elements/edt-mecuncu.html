<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-tooltip/core-tooltip.html">
<link rel="stylesheet" href="../styles/edt-mecuncu.css">

<polymer-element name="edt-mecuncu">
	<template>
	<div layout vertical center>
		<table id="edt">
			<caption>
				<div class="edt-caption">
					<img class="edt-logo" src="../images/mecuncu.png" alt="Logo Asociacion"/>
					EDT - MecUncu
				</div>
			</caption>
			<thead class="edt-head">
				<th class="edt-head-wrap">Día</td>
				<th class="edt-head-time-h" id="Hora">Hora</td>
			</thead>
			<tbody>
				<tr>
					<td id="Lunes_" class="edt-days" on-click="{{showTimesV}}">Lunes</td>
					<td class="edt-times-h">
						<div class="chartContainer" id="LunesH"></div>
					</td>
				</tr>
				<tr>
					<td id="Lunes_V" class="edt-times-v hide">
						<div class="chartContainerV" id="LunesV"></div>
					</td>
				</tr>
				<tr>
					<td id="Martes_" class="edt-days" on-click="{{showTimesV}}">Martes</td>
					<td class="edt-times-h">
						<div class="chartContainer" id="MartesH"></div>
					</td>
				</tr>
				<tr>
					<td id="Martes_V" class="edt-times-v hide">
						<div class="chartContainerV" id="MartesV"></div>
					</td>
				</tr>
				<tr>
					<td id="Miercoles_" class="edt-days" on-click="{{showTimesV}}">Miercoles</td>
					<td class="edt-times-h">
						<div class="chartContainer" id="MiercolesH"></div>
					</td>
				</tr>
				<tr>
					<td id="Miercoles_V" class="edt-times-v hide">
						<div class="chartContainerV" id="MiercolesV"></div>
					</td>
				</tr>
				<tr>
					<td id="Jueves_" class="edt-days" on-click="{{showTimesV}}">Jueves</td>
					<td class="edt-times-h">
						<div class="chartContainer" id="JuevesH"></div>	
					</td>
				</tr>
				<tr>
					<td id="Jueves_V" class="edt-times-v hide">
						<div class="chartContainerV" id="JuevesV"></div>
					</td>
				</tr>
				<tr>
					<td id="Viernes_" class="edt-days" on-click="{{showTimesV}}">Viernes</td>
					<td class="edt-times-h">
						<div class="chartContainer" id="ViernesH"></div>
					</td>
				</tr>
				<tr>
					<td id="Viernes_V" class="edt-times-v hide">
						<div class="chartContainerV" id="ViernesV"></div>
					</td>
				</tr>
				<tr>
					<td id="Sabado_" class="edt-days" on-click="{{showTimesV}}">Sábado</td>
					<td class="edt-times-h">
						<div class="chartContainer" id="SabadoH"></div>
					</td>
				</tr>
				<tr>
					<td id="Sabado_V" class="edt-times-v hide">
						<div class="chartContainerV" id="SabadoV"></div>
					</td>
				</tr>
			</tbody>
		</table>
		</div>
		<div><p class="edt-footer">Asociación de Mecatrónica de Mendoza</p></div>
	</template>
	<script>
		$(window).on('resize', function() {
			clearplot();
			replot();
		});
	
		window.addEventListener('polymer-ready', function(e) {
					
			var config = {	types:	{
								Clase: {
									color:'#B1C3F9'
								},
								Plenaria: {
									color:'#9EE874'
								},
								Curso: {
									color: '#FFED70'
								},
								Examen: {
									color: '#9F8186'
								},
								TP: {
									color: '#FF8680'
								}
							},
							limits:	{
								start:'08h00',
								end:'22h00'
							}
						 }
						
			var timesM = [	{	ti:'14h30',
								tf:'16h48',
								place:'Aula 10',
								person:'Alvaro Alonso',
								type:'Clase'
							},
							{	ti:'17h00',
								tf:'18h00',
								place:'Aula 1',
								person:'Gino Copparoni',
								type:'TP'
							},
							{	ti:'08h40',
								tf:'09h50',
								place:'Aula 16',
								person:'Franco Ardiani',
								type:'Plenaria'
							},
							{	ti:'18h30',
								tf:'20h29',
								place:'Asociación de Mecatrónica',
								person:'Fernando Cladera',
								type:'Curso'
							},
							{	ti:'11h00',
								tf:'11h45',
								place:'Aula 5',
								person:'Maximiliano Badaloni',
								type:'Examen'
							}];
							
			var timesT = [	{	ti:'12h30',
								tf:'13h48',
								place:'Aula 6',
								person:'Andrés Manelli',
								type:'Curso'
							},
							{	ti:'08h10',
								tf:'10h20',
								place:'Anfiteatro Oeste',
								person:'Aníbal Mirasso',
								type:'Clase'
							},
							{	ti:'19h00',
								tf:'20h00',
								place:'Asociación de Mecatrónica',
								person:'Fernando Cladera',
								type:'Curso'
							},
							{	ti:'15h00',
								tf:'16h30',
								place:'Anfiteatro Este',
								person:'Susana Bernasconi',
								type:'Plenaria'
							}];
			
			var times =  [	{	day:'Martes',
								times:timesT
							},
							{	day:'Jueves',
								times:timesM
							}];
								
			timeplot(times,config);
		});
		
		Polymer({			
			showTimesV: function(event, detail, sender) {
				element=this.$.edt.querySelector('#'+sender.id+'V');
				console.log('day clicked');
				if(! element){
					console.log('element not found');
				}
				else {
					if( $('#'+sender.id+'V').hasClass('hide') ){
						$('#edt').find('.edt-times-v').each(function(index){
							$(this).removeClass('hide');
							$(this).addClass('hide');
						});
						$('#'+sender.id+'V').removeClass('hide');					
						clearplot();
						replot();
					} else {
						$('#'+sender.id+'V').addClass('hide');
					}
				}
			},
		});
	</script>
</polymer-element>
